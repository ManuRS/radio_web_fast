<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>P√≥dcast de diarios</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    h1 { text-align: center; }
    .podcast { 
      margin-bottom: 50px;
      padding-bottom: 20px;
      border-bottom: 1px solid #ddd;
    }
    .podcast-contenido {
      display: flex;
      align-items: center; /* centra verticalmente la imagen con el contenido */
      gap: 40px; /* espacio entre imagen y contenido */
    }
    .podcast-texto { flex: 1; }
    .podcast img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 5px;
    }
    audio { width: 100%; margin-top: 10px; display: block; }
    .titulo-principal { font-weight: bold; margin: 0; }
    .titulo-secundario { color: gray; font-style: italic; margin: 2px 0 0 0; }
    .controles {
      margin-top: 5px;
    }
    .controles button {
      margin-right: 10px;
      padding: 5px 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
      background: #f0f0f0;
      cursor: pointer;
    }
    .controles button:hover { background: #ddd; }

    /* üì± M√≥viles */
    @media (max-width: 600px) {
      body { padding: 10px; }

      .podcast-contenido {
        flex-direction: column; /* Imagen arriba, texto abajo */
        gap: 10px;              /* menos espacio entre imagen y texto */
        align-items: center;    /* centra todo horizontalmente */
        text-align: center;     /* centra el texto */
      }

      .podcast img {
        width: 100px;
        height: 100px;
        margin: 0 auto;        /* centrada horizontalmente */
      }
      
      .podcast-texto {
        width: 100%;            /* ocupa todo el ancho disponible */
      }
      
      .titulo-principal {
        text-align: center;     /* t√≠tulo centrado */
      }

      audio {
        width: 100%;            /* reproductor sin m√°rgenes */
      }
      
      .controles {
        display: flex;
        flex-wrap: wrap;
        justify-content: center; /* botones centrados */
        gap: 5px;
        margin-top: 30px;    
      }

      .controles button {
        margin: 0;
      }

    }

    /* üíª Escritorio grande */
    @media (min-width: 601px) {
      .podcast-contenido {
        gap: 40px;
      }
    }
    
  </style>
</head>
<body>
  <h1>P√≥dcast de diarios<br><br></h1>
  <div id="lista"></div>

  <script>

    async function cargarRSS(feedUrl_arg) {
      try {
        const res = await fetch(feedUrl_arg);
        const texto = await res.text();
        const parser = new DOMParser();
        const xml = parser.parseFromString(texto, "application/xml");

        const items = Array.from(xml.querySelectorAll("item")).slice(0, 2); // √∫ltimos 30

        const imageUrl = xml.querySelector("image > url")?.textContent || null;
        const htmlImagen = imageUrl ? `<img src="${imageUrl}" alt="Podcast">` : "";

        const listaDiv = document.getElementById("lista");

        items.forEach(item => {
          const titulo = item.querySelector("title")?.textContent || "Sin t√≠tulo";
          const pubDate = item.querySelector("pubDate")?.textContent || null;
          const audioUrl = item.querySelector("enclosure")?.getAttribute("url") || null;

          const contenedor = document.createElement("div");
          contenedor.className = "podcast";

          if (audioUrl) {
            contenedor.innerHTML = `
              <div class="podcast-contenido">
                ${htmlImagen}
                <div class="podcast-texto">
                  <p class="titulo-principal">${titulo}</p>
                  <br>
                  <audio controls style="background-color: #f1f3f4;" src="${audioUrl}"></audio>
                  <div class="controles">
                    <br>
                    <button onclick="
                      let a=this.parentElement.previousElementSibling;
                      if(a.paused){ a.play(); this.textContent='‚è∏ Pausa'; }
                      else { a.pause(); this.textContent='‚ñ∂ Play'; }
                  ">‚ñ∂ Play</button>
                    <button onclick="this.parentElement.previousElementSibling.currentTime = Math.max(0,this.parentElement.previousElementSibling.currentTime-10)">‚è™ -10s</button>
                    <button onclick="this.parentElement.previousElementSibling.currentTime = Math.min(this.parentElement.previousElementSibling.duration,this.parentElement.previousElementSibling.currentTime+10)">‚è© +10s</button>
                    <button onclick="let a=this.parentElement.previousElementSibling;a.playbackRate=a.playbackRate===1?2:1;this.textContent=a.playbackRate===2?'‚è∏ x1':'‚è© x2'">‚è© x2</button>
                  </div>
                </div>
              </div>
              <br>
            `;
          } else {
            contenedor.innerHTML = `<p class="titulo-principal">${titulo} (No se encontr√≥ audio)</p>`;
          }

          listaDiv.appendChild(contenedor);
        });

      } catch(e) {
        console.error("Error cargando RSS:", e);
      }
    }

    // EL PAIS
    setTimeout(function() {
            cargarRSS("https://www.omnycontent.com/d/playlist/26708dff-8243-49e4-a5b6-adb700ec9cae/a7906eb0-d14b-4bc1-a048-ae30009a0e51/3ec1b1fa-5520-4b11-b8f2-ae30009a0e77/podcast.rss");
    },0);

    // EL DIARIO ES
    setTimeout(function() {
            cargarRSS("https://www.omnycontent.com/d/playlist/554539c9-b3b2-431a-9f3a-ada4006d04a0/fdb7ac24-1c3a-4a0d-b03b-ada400b2e7a1/161b26db-5f85-42a9-abc8-ada6008a528b/podcast.rss");
    },500);

    // EL MUNDO
    setTimeout(function() {
            cargarRSS("https://www.omnycontent.com/d/playlist/4ac2c3a8-bb0c-499b-bf22-ac8400df1983/ff4d483b-7684-41b7-9b75-ad3600959411/6a186be0-036a-4b83-8adc-ad39010d9484/podcast.rss");
    },1000);

  </script>
</body>
</html>
